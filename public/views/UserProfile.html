<div ng-controller='UserController as vm'>
<!--
display personal profile info
edit personal profile info
add new stories
photo
delete Story
delete linked profile


*** STRETCH GOALS ******
ADD DEFAULT PIC FOR STORY IF USER DOESNT UPLOAD ONE
 -->
<div class="profile-header" layout="row">
  <div flex-offset="45">
    <!-- <img ng-src="vm.user.photo" alt="" /> -->
  </div>
</div>

<div class="toolbar" layout="row">
  <md-button class="nav-buttons"  ui-sref="AddStory">Add Story</md-button>
  <md-button class="nav-buttons"  ui-sref="AddFamily">Add a Family</md-button>
  <!-- <md-button class="nav-buttons"  ng-click="" ng-show="join">Join a Family</md-button> -->
</div>

<div layout="row">
  <div flex="80" class="story-box">
    <h2>My Stories</h2>
    <div ng-repeat="s in vm.userStory.story track by $index">
      <md-card>
        <a ui-sref="Story({id: s._id})"><img ng-src="{{s.photo}}" class="md-card-image" alt="{{s.title}}" title="{{s.title}}"></a>
        <md-card-content>
          <div layout="row">
              <h2 class="md-title"><a ui-sref="Story({id: s._id})">{{s.title}}</a></h2>
          </div>
          <div layout="row">
              Written by:<a ui-sref=""><i>{{s.createBy}}</i></a><br>
          </div>
          <p>
            {{s.body}}
          </p>
        </md-card-content>
        <div class="md-actions" layout="row" layout-align="end center">
          <md-button ui-sref="EditStory({StoryId: s._id})">Edit</md-button>
            <div ng-show="">
              <form ng-submit="vm.editFamily();">
                <md-content >
                  <md-input-container>
                    <label>Family Name</label>
                    <input ng-model="vm.family.familyName">
                  </md-input-container><br>
                  <md-input-container>
                    <label>Origin</label>
                    <input ng-model="vm.family.origin" >
                  </md-input-container><br>
                  <md-input-container>
                    <label>Photo</label>
                    <textarea ng-model="vm.family.photo" ></textarea>
                  </md-input-container><br>
                  <md-input-container>
                    <label>Password</label>
                    <input ng-model="vm.family.password" >
                  </md-input-container><br>
                  <md-button type="submit">Submit</md-button>
                </md-content>
              </form>
            </div>
          <md-button ng-click="vm.deleteStory(s)">Delete</md-button>
      </div>
    </md-card>
    </div>
    </div>
    <div flex class="family-box">
      <h2>My Family</h2>
        <div ng-repeat="f in vm.userFam.family track by $index">
          <md-card>
            <md-card-content>
              <div layout="row">
                  <h2 class="md-title"><a ui-sref="Family({id: f._id})">{{f.familyName}}</a></h2>
              </div>
              <div layout="row">
                  Origin:<i>{{f.origin}}</i><br>
              </div>
              <p>
                {{f.origin}}
              </p>
            </md-card-content>
            <div class="md-actions" layout="row" layout-align="end center">
              <a ui-sref="EditFamily({id: f._id})">Edit</a>
              <md-button ng-click="vm.deleteFamily(f)">Delete</md-button>
          </div>
        </md-card>
          <div ng-show="familyShow">

          </div>
        </div>
    </div>
  </div>
</div>

</div>
